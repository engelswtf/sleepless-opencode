# sleepless-opencode v1.0.0 Configuration
# Run `npm run setup` for interactive configuration

# ═══════════════════════════════════════════════════════════════════════════════
# NOTIFICATIONS (at least one of Discord/Slack/Webhook required)
# ═══════════════════════════════════════════════════════════════════════════════

# DISCORD BOT
# Get from: https://discord.com/developers/applications
DISCORD_BOT_TOKEN=

# Your Discord user ID (for DM notifications)
# Enable Developer Mode in Discord settings, right-click yourself → Copy ID
DISCORD_NOTIFICATION_USER_ID=

# Channel ID for notifications (optional, alternative to DMs)
# DISCORD_NOTIFICATION_CHANNEL_ID=

# Access control - restrict who can use the bot (comma-separated IDs)
# If both are empty, bot is open to everyone who can see it
# DISCORD_ALLOWED_USER_IDS=123456789,987654321
# DISCORD_ALLOWED_CHANNEL_IDS=123456789

# SLACK BOT (optional, alternative to Discord)
# Get from: https://api.slack.com/apps
# SLACK_BOT_TOKEN=xoxb-...
# SLACK_APP_TOKEN=xapp-...
# SLACK_NOTIFICATION_CHANNEL=general

# WEBHOOK (optional, for custom integrations)
# HTTP POST notifications to any URL
# WEBHOOK_URL=https://your-server.com/sleepless-webhook
# WEBHOOK_SECRET=your-hmac-secret
# WEBHOOK_EVENTS=started,completed,failed

# ═══════════════════════════════════════════════════════════════════════════════
# DAEMON SETTINGS
# ═══════════════════════════════════════════════════════════════════════════════

# Default workspace for tasks without project_path
OPENCODE_WORKSPACE=/root/projects

# How often to check for new tasks (milliseconds)
POLL_INTERVAL_MS=5000

# Maximum time for a single task (default: 30 minutes)
TASK_TIMEOUT_MS=1800000

# Maximum time for a single iteration (default: 10 minutes)
ITERATION_TIMEOUT_MS=600000

# Graceful shutdown timeout - how long to wait for current task (default: 60s)
SHUTDOWN_TIMEOUT_MS=60000

# Agent to use for tasks (optional)
# OPENCODE_AGENT=sleepless-executor

# Path to opencode binary (optional, auto-detected)
# OPENCODE_PATH=/root/.opencode/bin/opencode

# Model to use for tasks (optional, defaults to opencode.json setting)
# OPENCODE_MODEL=anthropic/claude-sonnet-4-5

# ═══════════════════════════════════════════════════════════════════════════════
# HEALTH & MONITORING
# ═══════════════════════════════════════════════════════════════════════════════

# Health server port (endpoints: /health, /ready, /status, /metrics)
HEALTH_PORT=9090

# ═══════════════════════════════════════════════════════════════════════════════
# LOGGING
# ═══════════════════════════════════════════════════════════════════════════════

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: pretty (colored console) or json (structured)
# LOG_FORMAT=json

# Log to file (enables rotation)
# LOG_FILE=/var/log/sleepless-opencode.log

# Max log file size before rotation (default: 10MB)
# LOG_MAX_SIZE=10485760

# Number of rotated log files to keep (default: 5)
# LOG_MAX_FILES=5

# ═══════════════════════════════════════════════════════════════════════════════
# DATA STORAGE
# ═══════════════════════════════════════════════════════════════════════════════

# Where to store SQLite database
# SLEEPLESS_DATA_DIR=./data
